# CLAUDE.md - AI Assistant Guide for Bible Repository

> This document provides context and guidelines for AI assistants working with this codebase.

## Project Overview

**Repository:** Bible
**Type:** Cross-platform mobile application (Web + iOS + Android)
**Tech Stack:** Web app with Capacitor wrapper
**Development Model:** AI-driven development with human oversight
**Project Status:** Non-profit / Open Source

### Licensing & Dependencies

This is a **non-profit project**. All dependencies must be:
- Open source with permissive licenses (MIT, Apache 2.0, BSD, ISC)
- Free for non-commercial use
- No proprietary or paid-tier-only features

When selecting libraries or tools, AI must verify license compatibility.

## Development Philosophy

This project follows an **AI-assisted development model**:

| Role | Responsibility |
|------|----------------|
| **Human Developer** | Infrastructure decisions, architecture, code review, approval |
| **AI Assistant** | Implementation details, writing code, following specifications |

### Key Principles

1. **AI writes all code** - Implementation is handled entirely by AI
2. **Human reviews everything** - All code must be reviewed and approved before merging
3. **Human decides architecture** - Infrastructure, tech choices, and design patterns are human decisions
4. **AI executes the vision** - AI implements according to specifications provided

## Tech Stack

### Core Technologies

- **Framework:** [Next.js](https://nextjs.org/) with React
- **Language:** TypeScript (strict mode)
- **Styling:** [Tailwind CSS](https://tailwindcss.com/)
- **UI Components:** TBD - must be Tailwind-based (e.g., shadcn/ui, Radix UI, Headless UI)
- **Mobile Wrapper:** [Capacitor](https://capacitorjs.com/) for iOS and Android

### Design-to-Code Workflow

UI components are generated via **Figma Make** and similar Figma-to-code tools. AI must:
- Follow Tailwind CSS conventions for all styling
- Use utility-first classes as generated by Figma tools
- Maintain consistency with Figma-exported component patterns
- Not override or restructure Figma-generated code without architect approval

### Project Structure

```
Bible/
├── CLAUDE.md              # AI assistant guidelines (this file)
├── README.md              # Project documentation
├── package.json           # Dependencies and scripts
├── next.config.js         # Next.js configuration
├── tailwind.config.js     # Tailwind CSS configuration
├── capacitor.config.ts    # Capacitor configuration
├── tsconfig.json          # TypeScript configuration
├── src/
│   ├── app/               # Next.js App Router (pages, layouts, routes)
│   │   ├── layout.tsx     # Root layout
│   │   ├── page.tsx       # Home page
│   │   └── [route]/       # Route directories
│   ├── components/        # React components
│   │   ├── ui/            # UI primitives (Figma-generated)
│   │   └── features/      # Feature-specific components
│   ├── lib/               # Shared utilities and helpers
│   ├── hooks/             # Custom React hooks
│   ├── services/          # API calls and business logic
│   ├── types/             # TypeScript type definitions
│   └── styles/            # Global styles and Tailwind customizations
├── public/                # Static assets
├── ios/                   # iOS native project (Capacitor-generated)
├── android/               # Android native project (Capacitor-generated)
└── __tests__/             # Test files
```

## Development Workflow

### AI-Human Collaboration Flow

```
1. Human defines requirement/feature
         ↓
2. AI proposes implementation approach (if complex)
         ↓
3. Human approves or adjusts approach
         ↓
4. AI implements the code
         ↓
5. Human reviews the code
         ↓
6. AI addresses feedback if needed
         ↓
7. Human approves and merges
```

### Git Branching Strategy

- **Main branch:** Production-ready, human-approved code only
- **Feature branches:** `feature/<description>` or `claude/<description>-<session-id>`
- **Bugfix branches:** `fix/<description>`

### Commit Message Conventions

Follow conventional commits:
- `feat:` New features
- `fix:` Bug fixes
- `docs:` Documentation changes
- `refactor:` Code refactoring
- `test:` Test additions/modifications
- `chore:` Maintenance tasks
- `style:` Formatting, no code change
- `perf:` Performance improvements

Example: `feat(auth): add biometric login for mobile`

## Code Style and Conventions

### General Principles

1. **Readability over cleverness** - Write code humans can easily review
2. **Explicit over implicit** - Make intentions clear
3. **Small, focused functions** - Easy to understand and test
4. **Consistent patterns** - Follow established patterns in the codebase

### Naming Conventions

| Type | Convention | Example |
|------|------------|---------|
| Files (components) | PascalCase | `UserProfile.tsx` |
| Files (utilities) | kebab-case | `user-service.ts` |
| Components | PascalCase | `UserProfile` |
| Functions | camelCase | `getUserById()` |
| Constants | UPPER_SNAKE_CASE | `MAX_RETRY_COUNT` |
| Types/Interfaces | PascalCase | `UserProfile` |
| Tailwind classes | utility-first | `flex items-center gap-4` |
| Custom CSS classes | kebab-case | `custom-scrollbar` |

### Tailwind CSS Guidelines

- **Utility-first approach** - Use Tailwind utilities, avoid custom CSS when possible
- **Consistent ordering** - Follow logical grouping: layout → spacing → sizing → typography → colors → effects
- **Responsive design** - Use Tailwind breakpoints (`sm:`, `md:`, `lg:`, `xl:`, `2xl:`)
- **Dark mode** - Use `dark:` variant for dark mode styles when implemented
- **Component extraction** - Extract repeated utility patterns into components, not `@apply`
- **Figma alignment** - Match Tailwind classes to Figma design tokens

### TypeScript Guidelines

- **No `any`** - Use proper types or `unknown` with type guards
- **Interfaces for objects** - Define clear contracts
- **Strict mode enabled** - Catch errors at compile time
- **Explicit return types** - For public functions

### Mobile-Specific Guidelines

- **Responsive design** - Support various screen sizes
- **Touch-friendly** - Minimum 44x44px touch targets
- **Offline consideration** - Handle network unavailability gracefully
- **Platform awareness** - Use Capacitor's platform detection when needed

## Commands Reference

### Development
```bash
# Install dependencies
npm install

# Run web development server
npm run dev

# Build for production
npm run build
```

### Capacitor Commands
```bash
# Add iOS platform
npx cap add ios

# Add Android platform
npx cap add android

# Sync web build to native projects
npx cap sync

# Open iOS project in Xcode
npx cap open ios

# Open Android project in Android Studio
npx cap open android

# Run on device/emulator
npx cap run ios
npx cap run android
```

### Testing
```bash
# Run all tests
npm test

# Run tests in watch mode
npm run test:watch

# Run tests with coverage
npm run test:coverage
```

### Linting
```bash
# Run linter
npm run lint

# Fix linting issues
npm run lint:fix
```

## AI Assistant Guidelines

### Before Starting Any Task

1. **Read existing code** - Understand current patterns and structure
2. **Check CLAUDE.md** - Follow documented conventions
3. **Ask if unclear** - Request clarification on architectural decisions

### When Implementing Features

1. **Follow specifications exactly** - Don't add unrequested features
2. **Match existing patterns** - Consistency is key for review
3. **Keep changes minimal** - Easier to review smaller changes
4. **Comment complex logic** - Help the reviewer understand intent
5. **Consider mobile context** - Remember this runs on phones

### Code Quality Checklist

Before submitting code for review:
- [ ] Follows project conventions and patterns
- [ ] No hardcoded secrets or credentials
- [ ] Proper error handling implemented
- [ ] Works on web, iOS, and Android
- [ ] Responsive design considered
- [ ] TypeScript strict mode passes
- [ ] Tests added for new functionality

### Things AI Must NOT Do

- Make architectural decisions without human approval
- Add dependencies without explicit permission
- Change project structure without approval
- Skip error handling
- Use `any` type in TypeScript
- Ignore mobile/cross-platform considerations
- Over-engineer beyond requirements

### Things AI Should Always Do

- Write clean, reviewable code
- Follow existing patterns exactly
- Ask for clarification when requirements are ambiguous
- Consider edge cases and error states
- Test on all platforms when relevant
- Document non-obvious implementation choices

## Architecture Decisions

*Documented by the human architect as decisions are made.*

### Decision Log

| Date | Decision | Rationale | Decided By |
|------|----------|-----------|------------|
| 2026-01-26 | AI-driven development model | Leverage AI for implementation while maintaining human oversight | Architect |
| 2026-01-26 | Non-profit, open source only | All dependencies must have permissive OSS licenses | Architect |
| 2026-01-26 | Capacitor for mobile | Single codebase for web, iOS, Android (MIT license) | Architect |
| 2026-01-26 | Next.js with React | Modern React framework with SSR/SSG capabilities (MIT license) | Architect |
| 2026-01-26 | Tailwind CSS | Best Figma-to-code compatibility, utility-first approach (MIT license) | Architect |
| 2026-01-26 | Figma Make for UI | Design-to-code workflow, generates Tailwind-compatible React | Architect |
| TBD | UI Component Library | Must be Tailwind-based and MIT licensed (shadcn/ui, Radix, Headless UI) | Architect |

## Environment Setup

### Prerequisites

- Node.js (LTS version)
- npm or yarn
- For iOS: macOS with Xcode
- For Android: Android Studio with SDK

### Local Development Setup

```bash
# Clone repository
git clone <repository-url>
cd Bible

# Install dependencies
npm install

# Start development server
npm run dev
```

### Mobile Development Setup

```bash
# Build web app
npm run build

# Sync to native projects
npx cap sync

# For iOS (requires macOS)
npx cap open ios

# For Android
npx cap open android
```

## Project Dependencies

### Core Dependencies

| Package | Purpose | Status |
|---------|---------|--------|
| `next` | React framework | Decided |
| `react`, `react-dom` | UI library | Decided |
| `typescript` | Type safety | Decided |
| `tailwindcss` | Styling | Decided |
| `@capacitor/core` | Mobile wrapper | Decided |
| `@capacitor/ios` | iOS platform | Decided |
| `@capacitor/android` | Android platform | Decided |

### Pending Decisions

All options below are open source with MIT license:

| Category | Options | Status |
|----------|---------|--------|
| UI Components | shadcn/ui (MIT), Radix UI (MIT), Headless UI (MIT) | TBD by Architect |
| State Management | Zustand (MIT), Jotai (MIT), React Context (built-in) | TBD by Architect |
| Data Fetching | TanStack Query (MIT), SWR (MIT) | TBD by Architect |
| Form Handling | React Hook Form (MIT), Formik (Apache 2.0) | TBD by Architect |

## Troubleshooting

### Common Issues

*To be documented as issues are encountered.*

### Capacitor-Specific Issues

- **Sync issues:** Run `npx cap sync` after any web build
- **Plugin not working:** Ensure native project is rebuilt after adding plugins
- **iOS build fails:** Check Xcode signing and provisioning profiles
- **Android build fails:** Verify SDK versions and Gradle sync

## Resources

### Framework & Libraries
- [Next.js Documentation](https://nextjs.org/docs)
- [React Documentation](https://react.dev/)
- [Tailwind CSS Documentation](https://tailwindcss.com/docs)
- [TypeScript Handbook](https://www.typescriptlang.org/docs/)

### Mobile (Capacitor)
- [Capacitor Documentation](https://capacitorjs.com/docs)
- [Capacitor Plugins](https://capacitorjs.com/docs/plugins)
- [Capacitor + Next.js Guide](https://capacitorjs.com/docs/guides/nextjs)
- [iOS Development Guide](https://capacitorjs.com/docs/ios)
- [Android Development Guide](https://capacitorjs.com/docs/android)

### Design-to-Code
- [Figma Make](https://www.figma.com/make/)
- [Builder.io Visual Copilot](https://www.builder.io/)

### UI Component Libraries (for reference)
- [shadcn/ui](https://ui.shadcn.com/)
- [Radix UI](https://www.radix-ui.com/)
- [Headless UI](https://headlessui.com/)

---

*Last updated: 2026-01-26*
